<div ng-app="mapApp">
  <span id="mss-features" class="never-show">
      <?php
        $contents = file_get_contents( plugins_url() . '/wp-fosb-map/src/assets/spatial/carto-css/sbht-features.mss');
        echo $contents;
      ?>
  </span>
  <span id="mss-lines" class="never-show">
      <?php
        $contents = file_get_contents( plugins_url() . '/wp-fosb-map/src/assets/spatial/carto-css/sbht-trail.mss');
        echo $contents;
      ?>
  </span>
  <div class="never-show" ng-include="src/assets/img/svg/project/defs/fosb-svg-defs.svg"></div>
<!--     <header id="page-header" class="page-header">
      <h1>Sleeping Bear Heritage Trail</h1>
      <p>Interactive Map Explorer</p>
    </header> -->
    <div id="map-wrapper" class="map-wrapper">
      <interactive-map></interactive-map>
      <panels></panels>
      <div ui-view></div>
      <map-controls></map-controls>
    </div>	<!-- </div> -->
	<!-- <playground></playground> -->
</div>
<svg class="never-show" xmlns="http://www.w3.org/2000/svg" version="1.1">
    <defs>
      <filter id="shadowed-goo">
          <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10" />
          <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
          <feGaussianBlur in="goo" stdDeviation="3" result="shadow" />
          <feColorMatrix in="shadow" mode="matrix" values="0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2" result="shadow" />
          <feOffset in="shadow" dx="1" dy="1" result="shadow" />
          <feComposite in2="shadow" in="goo" result="goo" />
          <feComposite in2="goo" in="SourceGraphic" result="mix" />
      </filter>
      <filter id="goo">
          <feGaussianBlur in="SourceGraphic" result="blur" stdDeviation="10" />
          <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="goo" />
          <feComposite in2="goo" in="SourceGraphic" result="mix" />
      </filter>
    </defs>
</svg>
<script>

  // track width, set to window width
  var width = $(window).width();

  // fire on window resize
  // $(window).resize(function() {
  //     // do nothing if the width is the same
  //     if ($(window).width()==width) return;
  //     // ... your code
  // });

  window.onload = function(){
      // $('#map').focus();
      // $('.map-wrapper *').click(function() {
      //   var $input = $( this );
      // // alert($input.prop('class'));
      // });
    // $('.popup__close, .panel__close').click(function() {
    //   $('#map').focus();
    // });
    // Get meta tags right
    $('meta[name=viewport]').attr('content', 'user-scalable=no, initial-scale=1.0, maximum-scale=1, minimum-scale=1, width=device-width, minimal-ui');

    // // Full-width after scroll
    // $(window).scroll(function () {
    //     var clientHeight = document.getElementById('page-header').clientHeight - 55;
    //     if ($(this).scrollTop() >= clientHeight) {
    //         $("#map-wrapper").css("left", "0");
    //         $("#map-wrapper").css("right", "0");
    //         // $(".page-header").css("display", "none");
    //         $("body").css("overflow-y", "hidden");
    //     }
    //     else {
    //         // $("#map-wrapper").css("left", "20px");
    //     }
    // });

  };

  // Detect touch devices
  // var isTouchDevice = 'ontouchstart' in document.documentElement;

  // Append inline style after map-style to disable pointer events
  // if (isTouchDevice){
  //     var noPointer = "<style type=\"text/css\"> \
  //     svg, .no-touch {pointer-events: none !important;}</style>";
  //     $('#map_style-css').after(noPointer);
  // }

  // Remove theme stylesheet
  document.styleSheets[0].disabled = true;

</script>
